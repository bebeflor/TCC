<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Óculos Masculinos - Vitaliz</title>
  <link rel="stylesheet" href="oculos-masc.css">
</head>
<body>

  <header>
    <h1 class="logo">Vitaliz</h1>
    <nav>
      <a href="cadastro.html">Cadastro</a>
      <a href="inicio.html">Início</a>
      <a href="oculos-fem.html">Moda Feminina</a>
      <a href="oculos-masc.html">Moda Masculina</a>
      <a href="oculos-infantil.html">Moda Infantil</a>
      <a href="consulta.html">Exame de vista</a>
      <a href="relogios.html">Relógios</a>
      <a href="contato.html">Contato</a>
    </nav>
  </header>

  <main>
    <section class="produtos">
      <h2>Armações Masculinas</h2>

      <div class="grid-produtos">
        <!-- Alternando: Óculos, Armação, Óculos, Armação ... (ordem ajustada) -->
        <div class="produto"><img src="img/masc2.png"><p class="titulo">Óculos de sol Atitude</p><p class="preco">R$ 399,00</p></div>
        <div class="produto"><img src="img/masc1.png"><p class="titulo">Armação Ideal</p><p class="preco">R$ 370,00</p></div>

        <div class="produto"><img src="img/masc4.png"><p class="titulo">Óculos de sol Mormaii</p><p class="preco">R$ 499,99</p></div>
        <div class="produto"><img src="img/masc18.jpg"><p class="titulo">Armação Pierre Cardin</p><p class="preco">R$ 690,00</p></div>

        <div class="produto"><img src="img/masc5.png"><p class="titulo">Óculos de sol Mormaii</p><p class="preco">R$ 450,00</p></div>
        <div class="produto"><img src="img/masc8,.jpeg"><p class="titulo">Armação Ideal</p><p class="preco">R$ 350,90</p></div>

        <div class="produto"><img src="img/masc7.png"><p class="titulo">Óculos de sol Class</p><p class="preco">R$ 550,00</p></div>
        <div class="produto"><img src="img/masc6.png"><p class="titulo">Armação Atitude</p><p class="preco">R$ 490,00</p></div>

        <!-- POSIÇÃO 9 agora recebe a antiga 13 -->
        <div class="produto"><img src="img/masc17.jpeg"><p class="titulo">Óculos de sol Mormaii</p><p class="preco">R$ 480,00</p></div>
        <div class="produto"><img src="img/masc3.png"><p class="titulo">Armação Pierre Cardin</p><p class="preco">R$ 660,00</p></div>

        <!-- POSIÇÃO 11 e 12 trocadas -->
        <div class="produto"><img src="img/masc11.png"><p class="titulo">Armação Class</p><p class="preco">R$ 480,00</p></div>
        <div class="produto"><img src="img/masc12..jpeg"><p class="titulo">Óculos de sol Urban Style</p><p class="preco">R$ 510,00</p></div>

        <!-- POSIÇÃO 13 agora recebe a antiga 9 -->
        <div class="produto"><img src="img/masc10..jpeg"><p class="titulo">Óculos de sol Ideal</p><p class="preco">R$ 620,00</p></div>
        <div class="produto"><img src="img/masc13.jpeg"><p class="titulo">Armação Ideal</p><p class="preco">R$ 620,00</p></div>

        <div class="produto"><img src="img/masc16.png"><p class="titulo">Óculos de sol Urban Style</p><p class="preco">R$ 510,00</p></div>
        <div class="produto"><img src="img/masc15.jpeg"><p class="titulo">Armação Urban Style</p><p class="preco">R$ 510,00</p></div>

        <!-- POSIÇÃO 17 e 20 trocadas: agora 17 recebe antiga 20 -->
        <div class="produto"><img src="img/oculos5.webp"><p class="titulo">Armação Tommy Hilfiger</p><p class="preco">R$ 890,00</p></div>
        <div class="produto"><img src="img/masc9.png"><p class="titulo">Armação Mormaii</p><p class="preco">R$ 799,00</p></div>

        <div class="produto"><img src="img/masc19.webp"><p class="titulo">Armação Oakley</p><p class="preco">R$ 950,00</p></div>
        <!-- POSIÇÃO 20 agora recebe a antiga 17 -->
        <div class="produto"><img src="img/masc20.webp"><p class="titulo">Óculos de sol Armani</p><p class="preco">R$ 1.100,00</p></div>
      </div>
    </section>
  </main>

  <footer>
    © 2025 Ótica Vitaliz - Todos os direitos reservados
  </footer>

  <!-- Modal -->
  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <span id="closeBtn" class="close">&times;</span>
      <img id="modal-img" src="" alt="Produto ampliado">
      <p id="modal-title"></p>
      <p id="modal-price"></p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const produtos = document.querySelectorAll(".produto");
      const modal = document.getElementById("modal");
      const modalImg = document.getElementById("modal-img");
      const modalTitle = document.getElementById("modal-title");
      const modalPrice = document.getElementById("modal-price");
      const closeBtn = document.getElementById("closeBtn");

      produtos.forEach(produto => {
        const imgEl = produto.querySelector('img');
        const tituloEl = produto.querySelector('.titulo');
        const precoEl = produto.querySelector('.preco');

        // Ao clicar no card (exceto no botão), abre modal
        produto.addEventListener('click', (e) => {
          if (e.target.closest('.pedido-btn')) return; // evita abrir modal quando clica no botão
          const img = imgEl ? imgEl.src : '';
          const titulo = tituloEl ? tituloEl.innerText : '';
          const preco = precoEl ? precoEl.innerText : '';

          modalImg.src = img;
          modalTitle.innerText = titulo;
          modalPrice.innerText = preco;
          modal.classList.remove('hidden');
        });

        // Cria botão 'Fazer pedido' funcional
        const pedidoBtn = document.createElement('button');
        pedidoBtn.type = 'button';
        pedidoBtn.className = 'pedido-btn';
        pedidoBtn.textContent = 'Fazer pedido';

        pedidoBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          const produtoNome = tituloEl ? tituloEl.innerText : '';
          const produtoPreco = precoEl ? precoEl.innerText : '';
          const key = 'pedido_items';
          try {
            const existing = JSON.parse(sessionStorage.getItem(key) || '[]');
            existing.push({ produto: produtoNome, preco: produtoPreco });
            sessionStorage.setItem(key, JSON.stringify(existing));
          } catch (err) {
            const existing = JSON.parse(localStorage.getItem(key) || '[]');
            existing.push({ produto: produtoNome, preco: produtoPreco });
            localStorage.setItem(key, JSON.stringify(existing));
          }
          // redireciona para a página de pedido
          window.location.href = 'pedido.html';
        });

        produto.style.position = 'relative';
        produto.appendChild(pedidoBtn);
      });

      closeBtn.addEventListener("click", () => {
        modal.classList.add("hidden");
      });

      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.add("hidden");
        }
      });
    });
  </script>
</body>
</html>

